var inliner=new function(){var e=this,t=/\/\*[\s\S]*?\*\//g,n=/([^\:]+):([^\;]*);/,r=/(\/\*[\s\S]*?\*\/)|([^\s\;\{\}][^\;\{\}]*(?=\{))|(\})|([^\;\{\}]+\;(?!\s*\*\/))/gim,o=1,s=2,c=3,l=4,d=function(e){return"undefined"==typeof e||0==e.length||null==e};e.styles="",e.config={"moz-do-not-send":!0,"rgb-to-hex":!0,printout:!0},e.init=function(){String.prototype.trim=function(){return this.replace(/^\s+|\s+$/g,"")},String.prototype.repeat=function(e){return new Array(1+e).join(this)},e.addPanel()},e.rgbToHex=function(e,t,n){return"#"+componentToHex(e)+componentToHex(t)+componentToHex(n)},e.toJSON=function(a,u){var p={children:{},attributes:{}},m=null,b=0;if("undefined"==typeof u)var u={ordered:!1,comments:!1,stripComments:!1,split:!1};for(u.stripComments&&(u.comments=!1,a=a.replace(t,""));null!=(m=r.exec(a));)if(!d(m[o])&&u.comments){var f=m[o].trim();p[b++]=f}else if(d(m[s])){if(!d(m[c]))return p;if(!d(m[l])){var g=m[l].trim(),h=n.exec(g);if(h){var v=h[1].trim(),y=h[2].trim();if(u.ordered){var x={};x.name=v,x.value=y,x.type="attr",p[b++]=x}else if(v in p.attributes){var k=p.attributes[v];k instanceof Array||(p.attributes[v]=[k]),p.attributes[v].push(y)}else p.attributes[v]=y}else p[b++]=g}}else{var v=m[s].trim(),$=e.toJSON(a,u);if(u.ordered){var x={};x.name=v,x.value=$,x.type="rule",p[b++]=x}else{if(u.split)var S=v.split(",");else var S=[v];for(i in S){var w=S[i].trim();if(w in p.children)for(var z in $.attributes)p.children[w].attributes[z]=$.attributes[z];else p.children[w]=$}}}return p},e.merge=function(t,n){var r={};for(var i in t)r[i]=t[i];for(var i in n)r[i]="object"==typeof t[i]?e.merge(t[i],n[i]):n[i];return r},e.addPanel=function(){var t='<div id="css-inliner-panel"><label class="css-inliner-input"><input id="moz-do-not-send" type="checkbox" '+(e.config["moz-do-not-send"]===!0?"checked":"")+'/> moz-do-not-send</label><label class="css-inliner-input"><input id="rgb-to-hex" type="checkbox" '+(e.config["rgb-to-hex"]===!0?"checked":"")+'/> rgb-to-hex</label><label class="css-inliner-input"><input id="printout" type="checkbox" '+(e.config.printout===!0?"checked":"")+'/> print to page</label><button class="css-inliner-button">Run CSS Inliner</button></div>';document.body.insertAdjacentHTML("beforeend",t);var n=$("#css-inliner-panel");n.css({position:"fixed",top:0,right:0,background:"white",border:"1px solid black"});var r=$(".css-inliner-input");r.css({display:"block",padding:"4px 10px","vertical-align":"middle"});var i=$(".css-inliner-button");i.css({border:"none","border-radius":0,color:"#fff",padding:"10px",cursor:"pointer",background:"black",width:"100%"}),i.on("click",function(){e.run()})},e.run=function(){var t={"moz-do-not-send":document.getElementById("moz-do-not-send").checked,"rgb-to-hex":document.getElementById("rgb-to-hex").checked,printout:document.getElementById("printout").checked};e.config=e.merge(e.config,t),$('[id^="css-inliner-"]').remove(),$("style").each(function(t,n){"responsive"!==$(this).attr("id")&&(e.styles=e.styles+"\n"+$(n).html(),$(this).remove())}),e.config["moz-do-not-send"]&&$("img").each(function(){$(this).attr("moz-do-not-send","true")});var n=e.toJSON(e.styles);for(style in n.children)$(style).css(n.children[style].attributes);var r=$("html").html();e.config["rgb-to-hex"]&&(r=r.replace(/\brgb\s*\(\s*(\d+)\s*,\s*(\d+)\s*,\s*(\d+)\s*\)/g,function(e,t,n,r){return"#"+("0"+Number(t).toString(16)).substr(-2)+("0"+Number(n).toString(16)).substr(-2)+("0"+Number(r).toString(16)).substr(-2)}));var i='<html xmlns="http://www.w3.org/1999/xhtml" style="margin: 0px; padding: 0px; height: 100%; width: 100%;">'+r+"</html>";console.log(i),e.config.printout&&(document.body.insertAdjacentHTML("beforeend",'<pre id="css-inliner-code"></pre>'),$("pre").text(i)),e.addPanel()},e.init()};